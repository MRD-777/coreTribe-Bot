# CoreTribe Bot ๐ค

ุจูุช ุชููุฌุฑุงู ูุชูุงูู ูุฅุฏุงุฑุฉ ูุฌุชูุน ุงููุจุฑูุฌูู ูุน ูุธุงู ููุงุทุ ุชุญุฏูุงุชุ ููุณุชููุงุช.

## ๐ ุงููุญุชููุงุช

- [ุงููููุฒุงุช](#-ุงููููุฒุงุช)
- [ุงูุชุซุจูุช](#-ุงูุชุซุจูุช)
- [ุงูุฅุนุฏุงุฏ](#%EF%B8%8F-ุงูุฅุนุฏุงุฏ)
- [ุงูุฃูุงูุฑ](#-ุงูุฃูุงูุฑ)
  - [ุฃูุงูุฑ ุงููุณุชุฎุฏููู](#ุฃูุงูุฑ-ุงููุณุชุฎุฏููู)
  - [ุฃูุงูุฑ ุงููุดุฑู](#ุฃูุงูุฑ-ุงููุดุฑู)
  - [ุฃูุงูุฑ ุงููุงูู](#ุฃูุงูุฑ-ุงููุงูู-ุญุตุฑูุฉ)
- [ูุธุงู ุงููุฌุชูุน](#-ูุธุงู-ุงููุฌุชูุน)
- [ูุธุงู ุงูุฅุดุนุงุฑุงุช](#-ูุธุงู-ุงูุฅุดุนุงุฑุงุช)
- [ุงูุฃูุงู](#-ุงูุฃูุงู)
- [ุงูุจููุฉ ุงูุชูููุฉ](#-ุงูุจููุฉ-ุงูุชูููุฉ)

## โจ ุงููููุฒุงุช

### ๐ฏ ูุธุงู ุงูุชุญุฏูุงุช
- ุฅูุดุงุก ูุฅุฏุงุฑุฉ ุงูุชุญุฏูุงุช ุงูุจุฑูุฌูุฉ
- ุงูุงูุถูุงู ููุชุญุฏูุงุช ูุชูุฏูู ุงูุญููู
- ูุฑุงุฌุนุฉ ูุชูููู ุงููุดุงุฑูุงุช
- ุจุซ ุงูุชุญุฏูุงุช ุงูุฌุฏูุฏุฉ ูุฌููุน ุงููุณุชุฎุฏููู

### โญ ูุธุงู ุงูููุงุท (IQC)
- ุนููุฉ IQC (IQ Coins) ูุณุชูุญุงุฉ ูู ุฃุฑุถ ุฒููููุง
- ูุณุจ ุงูููุงุท ูู ุฎูุงู ุงููุดุงุฑูุงุช ูุงูุชุญุฏูุงุช
- 8 ูุณุชููุงุช ูู Seeker ุฅูู Architect
- ุฅุดุนุงุฑุงุช ุชููุงุฆูุฉ ุนูุฏ ุงูุชุฑููุฉ

### ๐ ูุธุงู ุงููุณุชููุงุช
1. **Seeker (ุงูุจุงุญุซ)** - 0-100 IQC
2. **Learner (ุงููุชุนูู)** - 101-250 IQC
3. **Builder (ุงูุจููุงุก)** - 251-500 IQC
4. **Creator (ุงููุจุฏุน)** - 501-1000 IQC
5. **Expert (ุงูุฎุจูุฑ)** - 1001-2000 IQC
6. **Master (ุงููุญุชุฑู)** - 2001-4000 IQC
7. **Legend (ุงูุฃุณุทูุฑุฉ)** - 4001-8000 IQC
8. **Architect (ุงููููุฏุณ)** - 8001+ IQC

### ๐๏ธ ูุธุงู ุงููุฌุชูุน
- ููุงููู ุงููุฌุชูุน
- ูุธุงู ุงูููุงุท ุงูุชูุตููู
- ูุธุงู ููุญุฉ ุงูุดุฑู
- ุฑุงุณู ุงูุฃุฏูู ูุจุงุดุฑุฉ

### ๐ข ูุธุงู ุงูุฅุดุนุงุฑุงุช
- ุฅุดุนุงุฑ ุนูุฏ ุฅูุดุงุก ุชุญุฏู ุฌุฏูุฏ
- ุฅุดุนุงุฑ ุงูุชุฑููุฉ ูู ุงููุณุชูู
- ุฅุดุนุงุฑ ุงูุญุธุฑ ูุน ุงูุณุจุจ ูุงููุฏุฉ
- ุฅุดุนุงุฑ ุฅูุบุงุก ุงูุญุธุฑ

### ๐ ุงูุฃูุงู
- ูุตุงุฏูุฉ BOT_SECRET ูุฌููุน API endpoints
- Rate limiting ูููุน ุงูุฅุณุงุกุฉ
- ูุธุงู ุญุธุฑ ุงููุณุชุฎุฏููู
- ุชุฏููู ูุงูู (Audit logs)
- Sanitization ูููุฏุฎูุงุช
- HMAC signatures ููุทูุจุงุช

## ๐ ุงูุชุซุจูุช

```bash
# ุงุณุชูุณุงุฎ ุงููุดุฑูุน
git clone <repository-url>
cd bot-coreTribe

# ุชุซุจูุช ุงูุญุฒู
npm install

# ูุณุฎ ููู ุงูุจูุฆุฉ
copy .env.example .env
```

## โ๏ธ ุงูุฅุนุฏุงุฏ

ูู ุจุชุนุฏูู ููู `.env`:

```env
BOT_TOKEN=your_telegram_bot_token
BOT_SECRET=your_secret_key
MONGO_URI=mongodb://localhost:27017/coretribe
ADMIN_CHAT_ID=your_telegram_id
PORT=3000
API_URL=http://localhost:3000/api
```

### ุงูุญุตูู ุนูู BOT_TOKEN:
1. ุชูุงุตู ูุน [@BotFather](https://t.me/BotFather)
2. ุฃุฑุณู `/newbot`
3. ุงุชุจุน ุงูุชุนูููุงุช ูุงุญุตู ุนูู ุงูุชููู

### ุงูุญุตูู ุนูู ADMIN_CHAT_ID:
1. ุงุจุฏุฃ ูุญุงุฏุซุฉ ูุน ุงูุจูุช
2. ุงุฐูุจ ุฅูู: `https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates`
3. ุงุจุญุซ ุนู `"id"` ูู `"from"`

## ๐ฎ ุงูุฃูุงูุฑ

### ุฃูุงูุฑ ุงููุณุชุฎุฏููู

| ุงูุฃูุฑ | ุงููุตู |
|-------|-------|
| `/start` | ุงูุชุณุฌูู ูู ุงูุจูุช ูุงูุญุตูู ุนูู ุฑุณุงูุฉ ุงูุชุฑุญูุจ |
| `/menu` | ุนุฑุถ ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ |
| `/profile` | ุนุฑุถ ุงูููู ุงูุดุฎุตู ูุงูููุงุท |
| `/challenges` | ุนุฑุถ ุงูุชุญุฏูุงุช ุงููุชุงุญุฉ |
| `/submit <id> <link>` | ุชูุฏูู ุญู ูุชุญุฏู |

### ุงููุงุฆูุฉ ุงูุชูุงุนููุฉ (Inline Keyboard)

- **๐ค PROFILE** - ุงูููู ุงูุดุฎุตู
- **๐ฏ CHALLENGES** - ุงูุชุญุฏูุงุช
- **โญ POINTS** - ุงูููุงุท ูุงููุณุชูู
- **โ HOWTO** - ููููุฉ ุงูุงุณุชุฎุฏุงู
- **๐ง ุฑุงุณู ุงูุฃุฏูู** - ุฅุฑุณุงู ุฑุณุงูุฉ ููุฅุฏุงุฑุฉ
- **๐๏ธ ูุธุงู ุงููุฌุชูุน** - ุนุฑุถ ูุธุงู ุงููุฌุชูุน

### ุฃูุงูุฑ ุงููุดุฑู

| ุงูุฃูุฑ | ุงููุตู |
|-------|-------|
| `/review_list` | ุนุฑุถ ุงููุดุงุฑูุงุช ููุฏ ุงููุฑุงุฌุนุฉ |
| `/adjust <id> <ยฑpoints> <reason>` | ุชุนุฏูู ููุงุท ูุณุชุฎุฏู |
| `/ban_user <id> <hours> <reason>` | ุญุธุฑ ูุณุชุฎุฏู ูุคูุชุงู |
| `/unban_user <id>` | ุฅูุบุงุก ุญุธุฑ ูุณุชุฎุฏู |
| `/create_challenge title\|desc\|date` | ุฅูุดุงุก ุชุญุฏู ุฌุฏูุฏ |
| `/admin_help` | ุนุฑุถ ุฃูุงูุฑ ุงููุดุฑู |

**ุฃูุซูุฉ:**
```
/adjust 123456789 +100 ูุดุงุฑูุฉ ููุชุงุฒุฉ
/ban_user 987654321 24 spam
/create_challenge ุชุญุฏู ุงูุจุฑูุฌุฉ|ุงุตูุน ุชุทุจูู ููุจ|2025-12-31
```

### ุฃูุงูุฑ ุงููุงูู (ุญุตุฑูุฉ)

| ุงูุฃูุฑ | ุงููุตู |
|-------|-------|
| `/update_user <id> <field> <value>` | ุชุนุฏูู ุจูุงูุงุช ูุณุชุฎุฏู |

**ุงูุญููู ุงููุชุงุญุฉ:** `iqc`, `level`, `name`, `username`

**ุฃูุซูุฉ:**
```
/update_user 123456789 iqc 1000
/update_user 123456789 level 5
```

## ๐๏ธ ูุธุงู ุงููุฌุชูุน

### ูุธุงู ุงูููุงุท (IQC)

#### ุทุฑู ูุณุจ ุงูููุงุท:

1. **ุงููุดุงุฑูุงุช ุงูุชูููุฉ ุงููููุฏุฉ** - 10-30 ููุทุฉ
2. **ุญู ูุดุงูู ุงูุฃุนุถุงุก** - 15 ููุทุฉ
3. **ุงููุดุงุฑูุฉ ูู ุงูุชุญุฏูุงุช** - 20 ููุทุฉ (ูุงุฆุฒ) / 10 ููุงุท (ูุดุงุฑูุฉ)
4. **ุฅูุดุงุก ูุญุชูู ุชุนูููู** - 25-50 ููุทุฉ
5. **ุงูุญุถูุฑ ูู ุงููุนุงููุงุช** - 10 ููุงุท

#### ุฎุตู ุงูููุงุท:

- ุงููุญุชูู ุงูููุฑุฑ: -5 ููุงุท
- ุงูุชูุงู ุงูููุงููู: -10 ุฅูู -50 ููุทุฉ
- ุงูุณุจุงู: -20 ููุทุฉ + ุชุญุฐูุฑ

### ููุงููู ุงููุฌุชูุน

1. **ุงูุงุญุชุฑุงู ุฃุณุงุณ ุงูุชูุงุตู**
2. **ุนุฏู ุงูููุงุด ูู ุงูุณูุงุณุฉ ุฃู ุงูุฏูู**
3. **ุงูุญูุงุธ ุนูู ุงูุฌู ุงูุฅูุฌุงุจู**
4. **ุนุฏู ุงูุณุจุงู ุฃู ุงูุฅุนูุงูุงุช**
5. **ุฌูุฏุฉ ุงููุญุชูู ุฃูู ูู ุงููููุฉ**

## ๐ข ูุธุงู ุงูุฅุดุนุงุฑุงุช

### ุชุญุฏู ุฌุฏูุฏ
ุนูุฏ ุฅูุดุงุก ุชุญุฏูุ ูุชู ุฅุฑุณุงู ุฅุดุนุงุฑ ูุฌููุน ุงููุณุชุฎุฏููู ูุญุชูู ุนูู:
- ุนููุงู ุงูุชุญุฏู
- ูุตู ูุฎุชุตุฑ
- ุงูููุงูุฃุฉ
- ุชุงุฑูุฎ ุงูุงูุชูุงุก

### ุชุฑููุฉ ุงููุณุชูู
ุนูุฏ ุชุฑููุฉ ุงููุณุชุฎุฏูุ ูุชููู ุฅุดุนุงุฑ ูุญุชูู ุนูู:
- ุงููุณุชูู ุงููุฏูู
- ุงููุณุชูู ุงูุฌุฏูุฏ (ูุน ุงูุงุณู)
- ุงูููุงุท ุงูุญุงููุฉ

### ุงูุญุธุฑ
ุฑุณุงูุฉ ุชูุตูููุฉ ุนูุฏ ุงูุญุธุฑ ุชุญุชูู ุนูู:
- ูุฏุฉ ุงูุญุธุฑ
- ุชุงุฑูุฎ ุงูุชูุงุก ุงูุญุธุฑ
- ุงูุณุจุจ ุงูุชูุตููู
- ููุงุญุธุฉ ููุชูุงุตู ูุน ุงูุฅุฏุงุฑุฉ

## ๐ ุงูุฃูุงู

### ุงููุตุงุฏูุฉ
- **BOT_SECRET**: ุฌููุน API endpoints ูุญููุฉ
- **HMAC Signatures**: ุงูุชุญูู ูู ุตุญุฉ ุงูุทูุจุงุช
- **Rate Limiting**: ุญูุงูุฉ ูู ุงูุฅุณุงุกุฉ

### ุงูุญูุงูุฉ
- **Sanitization**: ุชูุธูู ุฌููุน ุงููุฏุฎูุงุช
- **Validation**: ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
- **Ban System**: ุญุธุฑ ุงููุณุชุฎุฏููู ุงููุฎุงูููู
- **Audit Logs**: ุชุณุฌูู ุฌููุน ุงูุฃุญุฏุงุซ ุงููููุฉ

### Middleware
- `authBotSecret.js` - ุงูุชุญูู ูู BOT_SECRET
- `rateLimiter.js` - ุชุญุฏูุฏ ูุนุฏู ุงูุทูุจุงุช
- `sanitize.js` - ุชูุธูู ุงููุฏุฎูุงุช
- `adminAuth.js` - ูุตุงุฏูุฉ ุงููุดุฑู

## ๐๏ธ ุงูุจููุฉ ุงูุชูููุฉ

### ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

- **Node.js** - ุจูุฆุฉ ุงูุชุดุบูู
- **Telegraf** - ุฅุทุงุฑ ุนูู ุจูุช ุงูุชููุฌุฑุงู
- **Express.js** - API Server
- **MongoDB** - ูุงุนุฏุฉ ุงูุจูุงูุงุช (ูุน Fallback ููุฐุงูุฑุฉ)
- **Mongoose** - ODM ูู MongoDB
- **Axios** - HTTP Client

### ุงูุญุฒู ุงูุฅุถุงููุฉ

- `mongo-sanitize` - ุชูุธูู ุงููุฏุฎูุงุช
- `express-rate-limit` - Rate Limiting
- `helmet` - ุฃูุงู HTTP Headers
- `compression` - ุถุบุท ุงูุงุณุชุฌุงุจุงุช
- `dotenv` - ูุชุบูุฑุงุช ุงูุจูุฆุฉ

### ูููู ุงููุดุฑูุน

```
bot-coreTribe/
โโโ bot/
โ   โโโ handlers/
โ   โ   โโโ start.js          # ูุนุงูุฌ /start
โ   โ   โโโ menu.js           # ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ
โ   โ   โโโ profile.js        # ุงูููู ุงูุดุฎุตู ูุงูููุงุท
โ   โ   โโโ challenges.js     # ุงูุชุญุฏูุงุช
โ   โ   โโโ submit.js         # ุชูุฏูู ุงูุญููู
โ   โ   โโโ admin.js          # ุฃูุงูุฑ ุงูุฃุฏูู
โ   โ   โโโ community.js      # ูุธุงู ุงููุฌุชูุน
โ   โ   โโโ contact.js        # ุฑุงุณู ุงูุฃุฏูู
โ   โโโ bot.js                # ุชููุฆุฉ ุงูุจูุช
โโโ routes/
โ   โโโ api.js                # Router ุฑุฆูุณู
โ   โโโ users.js              # ูุณุงุฑุงุช ุงููุณุชุฎุฏููู
โ   โโโ challenges.js         # ูุณุงุฑุงุช ุงูุชุญุฏูุงุช
โ   โโโ submissions.js        # ูุณุงุฑุงุช ุงูุชุณูููุงุช
โ   โโโ admin.js              # ูุณุงุฑุงุช ุงูุฃุฏูู
โโโ services/
โ   โโโ db.js                 # ุฎุฏูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ   โโโ scoring.js            # ูุธุงู ุงูููุงุท
โ   โโโ challengesService.js  # ุฎุฏูุฉ ุงูุชุญุฏูุงุช
โ   โโโ leaderboard.js        # ููุญุฉ ุงูุดุฑู
โ   โโโ notifications.js      # ูุธุงู ุงูุฅุดุนุงุฑุงุช
โโโ middleware/
โ   โโโ authBot.js            # ุงููุตุงุฏูุฉ ุงูุฑุฆูุณูุฉ
โ   โโโ authBotSecret.js      # ุงูุชุญูู ูู ุงูุณุฑ
โ   โโโ rateLimiter.js        # Rate Limiting
โ   โโโ sanitize.js           # ุชูุธูู ุงููุฏุฎูุงุช
โ   โโโ adminAuth.js          # ูุตุงุฏูุฉ ุงูุฃุฏูู
โโโ models/
โ   โโโ User.js               # ูููุฐุฌ ุงููุณุชุฎุฏู
โ   โโโ Challenge.js          # ูููุฐุฌ ุงูุชุญุฏู
โ   โโโ Submission.js         # ูููุฐุฌ ุงูุชุณููู
โ   โโโ BannedUser.js         # ูููุฐุฌ ุงููุญุธูุฑูู
โ   โโโ Audit.js              # ุณุฌู ุงูุชุฏููู
โโโ .env.example              # ูุซุงู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
โโโ index.js                  # ููุทุฉ ุงูุฏุฎูู
โโโ package.json              # ุงูุญุฒู
```

## ๐ ุงูุชุดุบูู

### ูุถุน ุงูุชุทููุฑ
```bash
npm run dev
```

### ูุถุน ุงูุฅูุชุงุฌ
```bash
npm start
```

## ๐ API Endpoints

### ุงููุณุชุฎุฏููู
- `GET /api/users/all` - ุฌููุน ุงููุณุชุฎุฏููู
- `GET /api/users/byTelegram/:id` - ูุณุชุฎุฏู ูุญุฏุฏ
- `POST /api/users/register` - ุชุณุฌูู ูุณุชุฎุฏู
- `GET /api/users/leaderboard` - ููุญุฉ ุงูุดุฑู
- `POST /api/users/:id/adjust` - ุชุนุฏูู ุงูููุงุท

### ุงูุชุญุฏูุงุช
- `GET /api/challenges` - ุงูุชุญุฏูุงุช ุงูููุชูุญุฉ
- `POST /api/challenges` - ุฅูุดุงุก ุชุญุฏู
- `GET /api/challenges/:id` - ุชุญุฏู ูุญุฏุฏ
- `POST /api/challenges/:id/join` - ุงูุงูุถูุงู ูุชุญุฏู

### ุงููุดุฑู
- `GET /api/admin/review_list` - ูุงุฆูุฉ ุงููุฑุงุฌุนุฉ
- `POST /api/admin/banUser` - ุญุธุฑ ูุณุชุฎุฏู
- `POST /api/admin/unbanUser` - ุฅูุบุงุก ุญุธุฑ
- `POST /api/admin/updateUser` - ุชุญุฏูุซ ุจูุงูุงุช
- `GET /api/admin/stats` - ุฅุญุตุงุฆูุงุช

## ๐ค ุงููุณุงููุฉ

ุงููุดุฑูุน ููุชูุญ ูููุณุงููุงุช! ููููู:
1. Fork ุงููุดุฑูุน
2. ุฅูุดุงุก feature branch
3. Commit ุงูุชุนุฏููุงุช
4. Push ููู branch
5. ูุชุญ Pull Request

## ๐ ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ูุฑุฎุต ุชุญุช mohamed reda.

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุงุณุชูุณุงุฑุงุช:
- ุงูุชุญ Issue ุนูู GitHub
- ุฑุงุณู ุงูุฃุฏูู ูู ุฎูุงู ุงูุจูุช

---

**ุตููุน ุจู โค๏ธ ููุฌุชูุน CoreTribe**
