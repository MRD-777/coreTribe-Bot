// -- file: bot/handlers/community.js --
const { Markup } = require('telegraf');

/**
 * Handle COMMUNITY callback - show community system menu
 */
exports.handleCommunitySystem = async (ctx) => {
  try {
    const keyboard = Markup.inlineKeyboard([
      [Markup.button.callback('โ๏ธ ูุธุงู ุงูููุงุท', 'POINTS_SYSTEM')],
      [Markup.button.callback('๐ ูุธุงู ููุญุฉ ุงูุดุฑู', 'LEVELS_SYSTEM')],
      [Markup.button.callback('โ๏ธ ููุงููู ุงููุฌุชูุน', 'COMMUNITY_RULES')],
      [Markup.button.callback('ยซ ุฑุฌูุน', 'BACK_TO_MENU')]
    ]);

    const msg = '๐๏ธ ูุธุงู ุงููุฌุชูุน\n\nุงุฎุชุฑ ุงููุณู ุงูุฐู ุชุฑูุฏ ูุนุฑูุฉ ุงููุฒูุฏ ุนูู:';

    if (ctx.callbackQuery) {
      await ctx.editMessageText(msg, keyboard);
    } else {
      await ctx.reply(msg, keyboard);
    }
  } catch (error) {
    console.error('Community system error:', error.message);
  }
};

/**
 * Handle POINTS_SYSTEM callback
 */
exports.handlePointsSystem = async (ctx) => {
  try {
    const msg = `
โ๏ธ ูุธุงู ุงูููุงุท ูู ูุฌุชูุน CoreTribe

ุงููุธุงู ูุตูู ูุชูุฏูุฑ ุงูุฌูุฏ ุงูุญูููู ูุงููุณุงููุงุช ุงููุนุงูุฉ ุฏุงุฎู ุงููุฌุชูุน.
ูู ููุทุฉ ุชุณุงูู ุชูุฏูุฑูุง ุญูููููุง ููุณุชูุงู ูุชุฃุซูุฑู.

๐ช ุงูุนููุฉ: IQC (IQ Coins)
ูุณุชูุญู ูู ููุฑุฉ ูุชุงุจ ุฃุฑุถ ุฒููููุง

๐น ุทุฑู ูุณุจ ุงูููุงุท:

1๏ธโฃ ุงููุดุงุฑูุงุช ุงูุชูููุฉ ุงููููุฏุฉ
ูุดุฑ ุดุฑูุญุงุชุ ุฃููุงุฏ ุนูููุฉุ ุฃู ููุงุถูุน ุชุซุฑู ุงููุญุชูู ุงูุจุฑูุฌู.
๐ธ ูู +10 ุฅูู +30 ููุทุฉ ุญุณุจ ุงูุฌูุฏุฉ ูุงูุชูุงุนู.

2๏ธโฃ ุญู ูุดุงูู ุงูุฃุนุถุงุก
ุงููุณุงุนุฏุฉ ูู ุฅุตูุงุญ ุงูุฃููุงุฏุ ุฃู ุชูุฏูู ุญููู ูุงูุนูุฉ ุจูุตุงุฏุฑ ููุซููุฉ.
๐ธ +15 ููุทุฉ ููู ุญู ูุนุงู ูุชู ุงุนุชูุงุฏู.

3๏ธโฃ ุงููุดุงุฑูุฉ ูู ุงูุชุญุฏูุงุช ุงูุจุฑูุฌูุฉ
ุงูุฏุฎูู ูู ุงูุชุญุฏูุงุช ุงูุฃุณุจูุนูุฉ ุฃู ุงูุดูุฑูุฉ ูุชูููุฐ ุงููุทููุจ ุจุฌูุฏุฉ ุนุงููุฉ.
๐ธ +20 ูููุงุฆุฒ / +10 ููู ูุดุงุฑูุฉ ุฌุงุฏุฉ.

4๏ธโฃ ุฅูุดุงุก ูุญุชูู ุชุนูููู ุฃุตูู
ููุงูุงุชุ ููุฏูููุงุชุ ุฃู ูุดุงุฑูุน open-source ูุงูุนุฉ ูููุฌุชูุน.
๐ธ ูู +25 ุฅูู +50 ููุทุฉ ุญุณุจ ุงูุชุฃุซูุฑ.

5๏ธโฃ ุงูุญุถูุฑ ูุงููุณุงููุฉ ูู ุงููุนุงููุงุช
ุฌูุณุงุช ุงูุจุซ ุงููุจุงุดุฑุ ูุฑุด ุงูุนููุ ุฃู ุงูููุงุกุงุช ุงูุชูููุฉ.
๐ธ +10 ููุงุท ููู ุญุถูุฑ ูุนุงู.

โ๏ธ ุฎุตู ุงูููุงุท:
- ุงููุญุชูู ุงูููุฑุฑ ุฃู ุบูุฑ ุงููููุฏ: -5 ููุงุท
- ุงูุชูุงู ุงูููุงููู: ูู -10 ุฅูู -50 ููุทุฉ
- ุงูุณุจุงู ุฃู ุงูุฅุฒุนุงุฌ: -20 ููุทุฉ + ุชุญุฐูุฑ

ูููุฒูุฏ ูู ุงูุชูุงุตูู:
https://t.me/c/3282133816/6/18
    `.trim();

    const keyboard = Markup.inlineKeyboard([
      [Markup.button.callback('ยซ ุฑุฌูุน ููุธุงู ุงููุฌุชูุน', 'COMMUNITY')]
    ]);

    await ctx.editMessageText(msg, keyboard);
  } catch (error) {
    console.error('Points system error:', error.message);
  }
};

/**
 * Handle LEVELS_SYSTEM callback
 */
exports.handleLevelsSystem = async (ctx) => {
  try {
    const msg = `
๐ ูุธุงู ุงููุณุชููุงุช ุฏุงุฎู CoreTribe

ูู ูุณุชูู ููุซู ูุฑุญูุฉ ูู ุฑุญูุฉ ุงููุจุฑูุฌ ุฏุงุฎู ุงููุฌุชูุนุ ูููุชุญ ูู ุตูุงุญูุงุช ููุฑุต ููุณุคูููุงุช ุฃูุซุฑ.

๐ ุงููุณุชููุงุช ุงูุซูุงููุฉ:

๐ฅ ุงููุณุชูู 1: ุงููSeeker (ุงูุจุงุญุซ)
ุงููุตู: ุนุถู ุฌุฏูุฏ ูู ุงููุฌุชูุน ุจุฏุฃ ุฑุญูุชู ูุชุนูู ูุชุทููุฑ ููุณู.
ุงูููุงุท: 0 โ 100 IQC
ุงูุฎุตุงุฆุต:
โข ุงููุตูู ูููุญุชูู ุงูุฃุณุงุณู
โข ุงููุดุงุฑูุฉ ูู ุงูููุงุดุงุช ุงูุนุงูุฉ
โข ุงูุญุตูู ุนูู ุฃูู ุงูููุงู ูุงููุดุงุฑูุน ุงูุจุณูุทุฉ

๐ง ุงููุณุชูู 2: ุงููLearner (ุงููุชุนูู)
ุงููุตู: ุจุฏุฃ ููููู ุฃุณุงุณ ููู ูู ุงูุจุฑูุฌุฉ ููุทุจู ุงูููุงู ุจุงูุชุธุงู.
ุงูููุงุท: 101 โ 250 IQC
ุงูุฎุตุงุฆุต:
โข ุฏุฎูู ุฃููู ุงููุณุงุจูุงุช ุงูุฃุณุจูุนูุฉ
โข ุชูููู ุงูููุฏ ูู ุงูุฃุนุถุงุก ุงูุฃุนูู
โข ููุงุท ุฅุถุงููุฉ ุนูุฏ ุงูุงูุชุฒุงู ุงูุฃุณุจูุนู

๐ฏ ุงููุณุชูู 3: ุงููBuilder (ุงูุจููุงุก)
ุงูููุงุท: 251 โ 500 IQC
โข ุจูุงุก ูุดุงุฑูุน ูุชูุณุทุฉ ุงูุญุฌู
โข ุงููุณุงุนุฏุฉ ูู ุชูุฌูู ุงููุจุชุฏุฆูู

โก ุงููุณุชูู 4: ุงููCreator (ุงููุจุฏุน)
ุงูููุงุท: 501 โ 1000 IQC
โข ุฅูุดุงุก ูุญุชูู ุชุนูููู ูุชูุฏู
โข ููุงุฏุฉ ูุฑู ุตุบูุฑุฉ ูู ุงููุดุงุฑูุน

๐ฅ ุงููุณุชูู 5: ุงููExpert (ุงูุฎุจูุฑ)
ุงูููุงุท: 1001 โ 2000 IQC
โข ูุฑุงุฌุนุฉ ูุชูููู ุงููุดุงุฑูุน ุงููุจูุฑุฉ
โข ุฏูุฑ ุงุณุชุดุงุฑู ูู ุงููุฑุงุฑุงุช ุงูุชูููุฉ

๐ ุงููุณุชูู 6: ุงููMaster (ุงููุญุชุฑู)
ุงูููุงุท: 2001 โ 4000 IQC
โข ููุงุฏุฉ ุงููุดุงุฑูุน ุงูุฑุฆูุณูุฉ
โข ุตูุงุญูุงุช ุฅุฏุงุฑูุฉ ูุญุฏูุฏุฉ

๐ ุงููุณุชูู 7: ุงููLegend (ุงูุฃุณุทูุฑุฉ)
ุงูููุงุท: 4001 โ 8000 IQC
โข ูุฑุดุฏ ุฑุฆูุณู ูููุฌุชูุน
โข ุชุตููู ุงูุชุญุฏูุงุช ูุงููุณุงุจูุงุช

๐ ุงููุณุชูู 8: ุงููArchitect (ุงููููุฏุณ)
ุงูููุงุท: 8001+ IQC
โข ุฃุนูู ูุฑุชุจุฉ ูู ุงููุฌุชูุน
โข ุดุฑูู ูู ุชุทููุฑ ุฑุคูุฉ ุงููุฌุชูุน

ูููุฒูุฏ ูู ุงูุชูุงุตูู:
https://t.me/c/3282133816/54/55
    `.trim();

    const keyboard = Markup.inlineKeyboard([
      [Markup.button.callback('ยซ ุฑุฌูุน ููุธุงู ุงููุฌุชูุน', 'COMMUNITY')]
    ]);

    await ctx.editMessageText(msg, keyboard);
  } catch (error) {
    console.error('Levels system error:', error.message);
  }
};

/**
 * Handle COMMUNITY_RULES callback
 */
exports.handleCommunityRules = async (ctx) => {
  try {
    const msg = `
โ๏ธ ููุงููู ูุฌุชูุน CoreTribe

ูุฏููุง ุฎูู ุจูุฆุฉ ุฌุงุฏุฉุ ูุญุชุฑูุฉุ ูุชุฏูุนู ูุชุทูุฑ ุญูููู ูู ุฑุญูุชู ุงูุจุฑูุฌูุฉ.
ูู ุนุถู ูู ุงููุฌุชูุน ูุงุฒู ููุชุฒู ุจูุง ูู ุฃูู ููู.

โ๏ธ ุฃูููุง: ููุงุนุฏ ุงูุณููู ุงูุนุงู

1๏ธโฃ ุงูุงุญุชุฑุงู ุฃุณุงุณ ุงูุชูุงุตู
ูุง ููุด ุณุฎุฑูุฉุ ุชููููุ ุฃู ุชููุฑ ุจุฃู ุดูู. ุงูููุฏ ูููู ุจููุงุก ููููู.

2๏ธโฃ ุนุฏู ุงูููุงุด ูู ุงูุณูุงุณุฉ ุฃู ุงูุฏูู
ุฃู ุฃู ููุงุถูุน ุฎุงุฑุฌ ุงูุชูููุฉ.

3๏ธโฃ ุญุงูุธ ุนูู ุงูุฌู ุงูุฅูุฌุงุจู
ูุฏููุง ุฏุนู ุจุนุถ ูุด ุฅุญุจุงุท ุจุนุถ.

4๏ธโฃ ููููุน ุฅุฑุณุงู ุฑุณุงุฆู ุฎุงุตุฉ ุจุฏูู ุฅุฐู
ุฃู ุฅุนูุงูุงุช ุดุฎุตูุฉ.

5๏ธโฃ ูู ุนุถู ูุณุคูู ุนู ููุงูู
ุงูุฅุณุงุกุฉ ุฃู ุงูุฌุฏุงู ุงูุนููู = ุฎุตู ููุงุท + ุชุญุฐูุฑ ุฅุฏุงุฑู.

๐ ุซุงูููุง: ููุงุนุฏ ุงููุญุชูู ุงูุชููู

1๏ธโฃ ุฌูุฏุฉ ุงููุญุชูู ุฃูู ูู ุงููููุฉ
ุดุงุฑู ููุง ูููู ุนูุฏู ูููุฉ ุญููููุฉ ุชุถูููุง.

2๏ธโฃ ุชุฌูุจ ุงููุณุฎ ูุงููุตู ูู ChatGPT
ุจุฏูู ููู ุฃู ุชุทุจูู. ุงููุทููุจ ููู ุชุฌุฑุจุฉ ูููู.

3๏ธโฃ ุงุณุชุฎุฏู ุนูุงููู ูุงุถุญุฉ
ุนูุฏ ุทุฑุญ ุณุคุงู ุฃู ูุดุฑ ูุดุฑูุน.

4๏ธโฃ ููููุน ุงูุณุจุงู ุฃู ุงูุชูุฑุงุฑ
ุงููุญุชูู ุงูููุฑุฑ ุจุฏูู ูุงุฆุฏุฉ ุณูุชู ุญุฐูู.

โ๏ธ ุซุงูุซูุง: ุงูุนููุจุงุช

โข ุชุญุฐูุฑ ุฃูู: ุฑุณุงูุฉ ูู ุงูุฅุฏุงุฑุฉ
โข ุชุญุฐูุฑ ุซุงูู: ุฎุตู 20 ููุทุฉ
โข ุชุญุฐูุฑ ุซุงูุซ: ุฅููุงู ูุคูุช (3-7 ุฃูุงู)
โข ุชูุฑุงุฑ ุงูุงูุชูุงูุงุช: ุทุฑุฏ ููุงุฆู

ููููุงููู ุงููุงููุฉ:
https://t.me/c/3282133816/78/79
    `.trim();

    const keyboard = Markup.inlineKeyboard([
      [Markup.button.callback('ยซ ุฑุฌูุน ููุธุงู ุงููุฌุชูุน', 'COMMUNITY')]
    ]);

    await ctx.editMessageText(msg, keyboard);
  } catch (error) {
    console.error('Community rules error:', error.message);
  }
};
